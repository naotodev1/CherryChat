<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hanabi - Assistente</title>
<link rel="manifest" href="manifest.json">
<style>
body {margin:0;font-family:sans-serif;background:#071425;color:white;}
header {background:#ff6b81;padding:1rem;text-align:center;font-size:1.4rem;font-weight:bold;}
nav{display:flex;justify-content:space-around;background:#ff2b81;}
nav button{flex:1;padding:0.8rem;background:none;color:white;border:none;font-weight:bold;font-size:1rem;}
nav button.active{background:#ff4567;}
main{padding:1rem;min-height:80vh;}
#chatBox{height:50vh;overflow-y:auto;border:1px solid #ff4567;padding:0.5rem;margin-bottom:0.5rem;background:#071b35;}
.message{margin:0.2rem 0;}
.message.user{text-align:right;color:#FFD700;}
.message.hanabi{text-align:left;color:#00FFFF;}
input[type="text"]{width:75%;padding:0.5rem;}
button.send{padding:0.5rem 1rem;background:#ff6b81;border:none;color:white;font-weight:bold;}
.card{background:#0f2145;padding:0.5rem;margin:0.5rem 0;border-radius:6px;border:1px solid #ff4567;}
.card a{color:#FFD700;text-decoration:none;}
.card a:hover{text-decoration:underline;}
</style>
</head>
<body>

<header>Hanabi ‚ú® - Assistente</header>
<nav>
<button id="tabChat" class="active">Chat</button>
<button id="tabProducts">Produtos</button>
<button id="tabPolicies">Termos/Pol√≠ticas</button>
</nav>

<main>
<!-- Chat -->
<div id="chatSection">
  <div id="chatBox"></div>
  <input type="text" id="chatInput" placeholder="Escreva aqui...">
  <button class="send" id="sendBtn">Enviar</button>
</div>

<!-- Produtos -->
<div id="productsSection" style="display:none;">
  <h3>Obras Originais</h3>
  <div class="card"><a href="#" target="_blank">Abunai Aisuru</a></div>
  <div class="card"><a href="#" target="_blank">Married at 16</a></div>
  <div class="card"><a href="#" target="_blank">Emilly: Al√©m do Horizonte</a></div>
  <div class="card"><a href="#" target="_blank">Kizuite Kudassai - Please Notice, Me</a></div>
  <h3>Escola de Autores</h3>
  <div class="card"><a href="#" target="_blank">Tsukiyo Writer Class</a></div>
  <h3>Redes Sociais Studio Tsukiyo</h3>
  <div class="card"><a href="https://instagram.com/" target="_blank">Instagram</a></div>
  <div class="card"><a href="https://facebook.com/" target="_blank">Facebook</a></div>
  <div class="card"><a href="https://tiktok.com/" target="_blank">TikTok</a></div>
</div>

<!-- Pol√≠ticas/Termos -->
<div id="policiesSection" style="display:none;">
  <div class="card"><a href="https://naotodev1.github.io/studiotsukiyo-terms" target="_blank">Ver Termos e Pol√≠ticas Studio Tsukiyo Platforms</a></div>
</div>

</main>

<script>
// ---------- Tabs ----------
const tabChat = document.getElementById('tabChat');
const tabProducts = document.getElementById('tabProducts');
const tabPolicies = document.getElementById('tabPolicies');
const chatSection = document.getElementById('chatSection');
const productsSection = document.getElementById('productsSection');
const policiesSection = document.getElementById('policiesSection');

tabChat.onclick = ()=>{chatSection.style.display='block';productsSection.style.display='none';policiesSection.style.display='none';setActive(tabChat);}
tabProducts.onclick = ()=>{chatSection.style.display='none';productsSection.style.display='block';policiesSection.style.display='none';setActive(tabProducts);}
tabPolicies.onclick = ()=>{chatSection.style.display='none';productsSection.style.display='none';policiesSection.style.display='block';setActive(tabPolicies);}
function setActive(el){[tabChat,tabProducts,tabPolicies].forEach(b=>b.classList.remove('active'));el.classList.add('active');}

// ---------- Chat ----------
const chatBox = document.getElementById('chatBox');
const chatInput = document.getElementById('chatInput');
const sendBtn = document.getElementById('sendBtn');

function appendMessage(text,who){
  const div=document.createElement('div');
  div.className='message '+who;
  div.textContent=text;
  chatBox.appendChild(div);
  chatBox.scrollTop=chatBox.scrollHeight;
}

function saveMessage(user,msg){
  let db=JSON.parse(localStorage.getItem("hanabiDB")||"[]");
  db.push({user:user,msg:msg,time:new Date().toISOString()});
  localStorage.setItem("hanabiDB",JSON.stringify(db));
}

function loadMessages(){
  let db=JSON.parse(localStorage.getItem("hanabiDB")||"[]");
  db.forEach(d=>appendMessage(d.msg,d.user));
}

// ---------- Mini IA com +50 respostas ----------
function generateReply(msg){
  let t=msg.toLowerCase();
  const responses=[
    "Oi! Eu sou a Hanabi. Posso te ajudar com nossos produtos.",
    "üìö Quer conhecer nossas Light Novels originais?",
    "üéì Temos cursos na Tsukiyo Writer Class.",
    "üíª Espa√ßo Naoto Developer: tutoriais e automa√ß√µes.",
    "Voc√™ pode me perguntar sobre livros, cursos ou redes sociais.",
    "Ah! Voc√™ quer ver nossas obras originais?",
    "Kizuite Kudassai √© muito popular entre nossos leitores!",
    "Emilly: Al√©m do Horizonte √© cheia de aventuras.",
    "Abunai Aisuru √© nossa obra mais intensa.",
    "Married at 16 aborda romance e drama.",
    "Nosso Instagram tem novidades di√°rias!",
    "Facebook e TikTok tamb√©m trazem conte√∫dos exclusivos.",
    "Quer que eu salve um lembrete para voc√™?",
    "Voc√™ sabia que temos cursos de escrita criativa?",
    "Se quiser, posso listar todas as obras originais.",
    "Estou aprendendo sempre, posso entender melhor suas perguntas.",
    "Precisa de ajuda com o Tsukiyo Writer Class?",
    "Quer que eu te envie links para nossas redes sociais?",
    "Hanabi aqui, pronta para tirar d√∫vidas!",
    "Voc√™ quer dicas de leitura?",
    "Posso ajudar com agendamento de alarmes.",
    "Quer que eu te mostre nosso cat√°logo completo?",
    "Voc√™ pode me chamar de assistente Hanabi!",
    "Quer ver obras por categoria?",
    "Posso salvar notas para voc√™ localmente.",
    "Precisa de ajuda com login em alguma plataforma?",
    "Quer que eu explique sobre cada obra?",
    "Sabia que temos mentorias para novos autores?",
    "Quer uma recomenda√ß√£o personalizada de leitura?",
    "Voc√™ pode me perguntar sobre qualquer produto Studio Tsukiyo.",
    "Precisa de ajuda com redes sociais da Studio Tsukiyo?",
    "Quer que eu explique as pol√≠ticas de uso?",
    "Posso te ajudar a navegar entre abas.",
    "Quer que eu abra o link da Tsukiyo Writer Class?",
    "Posso listar links das nossas obras originais.",
    "Voc√™ quer dicas de escrita criativa?",
    "Quer ver os √∫ltimos lan√ßamentos?",
    "Quer que eu te explique Abunai Aisuru?",
    "Posso criar lembretes simples aqui.",
    "Quer ver obras mais populares?",
    "Precisa de ajuda com algum autor?",
    "Quer dicas sobre Married at 16?",
    "Posso te lembrar de eventos especiais.",
    "Quer que eu explique como usar Tsukiyo Writer Class?",
    "Precisa de ajuda com cadastro nas plataformas?",
    "Quer links diretos para nossas redes sociais?",
    "Quer ver nossa galeria de obras?",
    "Posso salvar suas prefer√™ncias localmente.",
    "Quer que eu te explique Kizuite Kudassai?",
    "Precisa de ajuda para encontrar obras espec√≠ficas?",
    "Quer que eu organize obras por categoria?",
    "Quer que eu abra o Instagram da Studio Tsukiyo?",
    "Quer sugest√µes de leitura di√°ria?"
  ];

  // palavras-chave simples
  if(t.includes("alarme")) return "‚è∞ Alarmes ainda n√£o implementados no browser, mas posso lembrar localmente!";
  if(t.includes("lembrete")) return "üìù Lembrete salvo localmente!";
  if(t.includes("livro")||t.includes("obra")) return "üìö Confira nossas obras na aba Produtos!";
  if(t.includes("curso")||t.includes("escola")) return "üéì Tsukiyo Writer Class na aba Produtos!";
  if(t.includes("naoto")||t.includes("developer")) return "üíª Espa√ßo Naoto Developer: tutoriais e automa√ß√µes!";
  if(t.includes("instagram")||t.includes("facebook")||t.includes("tiktok")) return "Veja nossos links de redes sociais na aba Produtos!";
  if(t.includes("oi")||t.includes("ol√°")||t.includes("hey")) return responses[0];
  
  // random response
  return responses[Math.floor(Math.random()*responses.length)];
}

// ---------- Envio ----------
sendBtn.onclick=()=>{
  let txt=chatInput.value.trim();
  if(!txt)return;
  appendMessage(txt,'user');
  saveMessage('user',txt);
  chatInput.value='';
  let reply=generateReply(txt);
  setTimeout(()=>{appendMessage(reply,'hanabi');saveMessage('hanabi',reply);},300);
}

// ---------- Load history ----------
loadMessages();
</script>

</body>
</html>

